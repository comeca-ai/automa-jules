# Scraping de ImÃ³veis - JoÃ£o Pessoa

## ğŸ“‹ Entendimento do Projeto

Este projeto realiza o scraping automatizado de apartamentos Ã  venda no site www.imoveisjoaopessoa.com.br usando a ferramenta Firecrawl. A soluÃ§Ã£o Ã© parametrizada e reprodutÃ­vel, salvando os dados extraÃ­dos em formatos CSV e JSON.

## ğŸ¯ Objetivos

1. Extrair dados detalhados de apartamentos Ã  venda
2. Salvar os dados em formatos CSV e JSON
3. CÃ³digo parametrizado e facilmente configurÃ¡vel
4. SoluÃ§Ã£o reprodutÃ­vel e escalÃ¡vel

## ğŸ› ï¸ EstratÃ©gia TÃ©cnica

### MÃ©todo Escolhido: Crawl + Extract

ApÃ³s anÃ¡lise da documentaÃ§Ã£o do Firecrawl, optamos pelo mÃ©todo **Crawl** combinado com **Extract** pelos seguintes motivos:

- **Crawl**: Permite navegar recursivamente por todas as pÃ¡ginas de listagem
- **Extract**: Usa LLM para extrair dados estruturados automaticamente
- **Vantagem**: Mais robusto que Map (que apenas lista URLs) e mais abrangente que Scrape (que processa apenas uma pÃ¡gina)

### Estrutura de Dados

Os dados dos imÃ³veis serÃ£o extraÃ­dos com os seguintes campos:
- TÃ­tulo do anÃºncio
- EndereÃ§o/LocalizaÃ§Ã£o
- PreÃ§o
- Ãrea (mÂ²)
- NÃºmero de quartos
- NÃºmero de banheiros
- NÃºmero de vagas
- DescriÃ§Ã£o
- CaracterÃ­sticas/Amenidades
- Link do anÃºncio
- Imagens (URLs)
- CÃ³digo do imÃ³vel
- Nome da imobiliÃ¡ria/Corretor

## ğŸš€ Como Usar

### PrÃ©-requisitos

1. Python 3.8+
2. Conta no Firecrawl (https://www.firecrawl.dev/)
3. API Key do Firecrawl

### InstalaÃ§Ã£o

```bash
# Clone o repositÃ³rio
git clone <seu-repositorio>
cd scraping-claude

# Crie um ambiente virtual
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate  # Windows

# Instale as dependÃªncias
pip install -r requirements.txt
```

### ConfiguraÃ§Ã£o

1. Copie o arquivo `.env.example` para `.env`
2. Adicione sua API Key do Firecrawl:
```
FIRECRAWL_API_KEY=sua_api_key_aqui
```

### ExecuÃ§Ã£o

```bash
# ExecuÃ§Ã£o bÃ¡sica
python scraper.py

# Com parÃ¢metros customizados
python scraper.py --limit 100 --output-dir ./dados --formato json,csv
```

### ParÃ¢metros DisponÃ­veis

- `--limit`: NÃºmero mÃ¡ximo de imÃ³veis para extrair (padrÃ£o: 50)
- `--output-dir`: DiretÃ³rio para salvar os arquivos (padrÃ£o: ./output)
- `--formato`: Formatos de saÃ­da (padrÃ£o: json,csv)
- `--url`: URL inicial para o crawl (padrÃ£o: www.imoveisjoaopessoa.com.br)

## ğŸ“ Estrutura do Projeto

```
scraping-claude/
â”œâ”€â”€ README.md           # Este arquivo
â”œâ”€â”€ requirements.txt    # DependÃªncias do projeto
â”œâ”€â”€ .env.example       # Exemplo de configuraÃ§Ã£o
â”œâ”€â”€ .gitignore         # Arquivos ignorados pelo git
â”œâ”€â”€ config.py          # ConfiguraÃ§Ãµes do projeto
â”œâ”€â”€ scraper.py         # Script principal
â”œâ”€â”€ models.py          # Modelos de dados (Pydantic)
â”œâ”€â”€ utils.py           # FunÃ§Ãµes auxiliares
â””â”€â”€ output/            # DiretÃ³rio de saÃ­da (gerado)
    â”œâ”€â”€ imoveis.json   # Dados em JSON
    â””â”€â”€ imoveis.csv    # Dados em CSV
```

## ğŸ”§ Tecnologias Utilizadas

- **Firecrawl**: Ferramenta principal de scraping
- **Pydantic**: ValidaÃ§Ã£o e estruturaÃ§Ã£o de dados
- **Pandas**: ManipulaÃ§Ã£o de dados e exportaÃ§Ã£o para CSV
- **Python-dotenv**: Gerenciamento de variÃ¡veis de ambiente

## ğŸ“Š Exemplo de SaÃ­da

### JSON
```json
{
  "imoveis": [
    {
      "titulo": "Apartamento 3 quartos - Bessa",
      "preco": 450000.00,
      "area": 120,
      "quartos": 3,
      "banheiros": 2,
      "vagas": 2,
      "endereco": "Rua Example, 123 - Bessa",
      "link": "https://www.imoveisjoaopessoa.com.br/imovel/12345"
    }
  ]
}
```

### CSV
```csv
titulo,preco,area,quartos,banheiros,vagas,endereco,link
"Apartamento 3 quartos - Bessa",450000.00,120,3,2,2,"Rua Example, 123 - Bessa","https://..."
```

## âš ï¸ ConsideraÃ§Ãµes Importantes

1. **Rate Limiting**: O Firecrawl possui limites de requisiÃ§Ãµes. O cÃ³digo implementa retry e backoff automÃ¡ticos.
2. **Custos**: Verifique os preÃ§os do Firecrawl antes de executar grandes extraÃ§Ãµes.
3. **Ã‰tica**: Respeite os termos de uso do site alvo e nÃ£o sobrecarregue seus servidores.
4. **Dados Pessoais**: Tome cuidado ao lidar com informaÃ§Ãµes sensÃ­veis.

## ğŸ› Troubleshooting

### Erro de API Key
Certifique-se de que a API Key estÃ¡ correta no arquivo `.env`

### Timeout ou Rate Limit
Ajuste o parÃ¢metro `--limit` para um valor menor ou aguarde antes de tentar novamente

### Dados Faltando
O site pode ter mudado sua estrutura. Verifique e ajuste os seletores em `models.py`

## ğŸ“ PrÃ³ximos Passos

- [ ] Adicionar filtros por preÃ§o, Ã¡rea, localizaÃ§Ã£o
- [ ] Implementar notificaÃ§Ãµes de novos imÃ³veis
- [ ] Criar dashboard para visualizaÃ§Ã£o dos dados
- [ ] Adicionar suporte para outros sites de imÃ³veis
